function makeid() {
    console.warn("deprecated soon. Use IT.Utils.makeid()");
    for (var t = "IT-", e = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", n = 0; n < 5; n++) t += e.charAt(Math.floor(Math.random() * e.length));
    return "it-component-" + t;
}

var IT = IT || class {}, base_url = base_url || "", base_events = [ "blur", "change", "click", "dblclick", "focus", "hover", "keydown", "keypress", "keyup", "show", "hide" ], transitionEnd = "webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend", animationEnd = "webkitAnimationEnd oanimationend msAnimationEnd animationend";

Array.prototype.remove = function(t, e) {
    var n = $.grep(this, function(n) {
        return n[t] !== e;
    });
    return this.length = 0, this.push.apply(this, n), this;
}, Array.prototype.insert = function(t, e) {
    this.splice(t, 0, e);
}, $.fn.serializeObject = function() {
    var t = {}, e = this.serializeArray();
    return $.each(e, function() {
        void 0 !== t[this.name] ? (t[this.name].push || (t[this.name] = [ t[this.name] ]), 
        t[this.name].push(this.value || "")) : t[this.name] = this.value || "";
    }), t;
}, $.fn.ajaxFileUpload = function(t) {
    var e = {
        params: {},
        action: "",
        onStart: function() {},
        onComplete: function(t) {},
        onCancel: function() {},
        valid_extensions: [ "gif", "png", "jpg", "jpeg" ],
        submit_button: null
    }, n = !1;
    return t && $.extend(e, t), this.each(function() {
        var t = $(this);
        if (!0 !== t.data("ajaxUploader-setup")) {
            t.change(function() {
                n = !1, null == e.submit_button && i();
            }), null == e.submit_button || e.submit_button.click(function() {
                n || i();
            });
            var i = function() {
                if ("" == t.val()) return e.onCancel.apply(t, [ e.params ]);
                var i = t.val().split(".").pop().toLowerCase();
                -1 == $.inArray(i, e.valid_extensions) ? e.onComplete.apply(t, [ {
                    status: !1,
                    message: "The select file type is invalid. File must be " + e.valid_extensions.join(", ") + "."
                }, e.params ]) : (n = !0, o(t), !1 !== e.onStart.apply(t) && t.parent("form").submit(function(t) {
                    t.stopPropagation();
                }).submit());
            };
            t.data("ajaxUploader-setup", !0);
            var s = function(t, i) {
                var s, o = t.contentWindow.document.body.innerHTML;
                try {
                    s = JSON.parse(o);
                } catch (t) {
                    s = o;
                }
                i.siblings().remove(), i.unwrap(), n = !1, e.onComplete.apply(i, [ s, e.params ]);
            }, o = function(t) {
                var n = "ajaxUploader-iframe-" + Math.round(new Date().getTime() / 1e3);
                $("body").after('<iframe width="0" height="0" style="display:none;" name="' + n + '" id="' + n + '"/>'), 
                $("#" + n).load(function() {
                    s(this, t);
                }), t.wrap(function() {
                    return '<form action="' + e.action + '" method="POST" enctype="multipart/form-data" target="' + n + '" />';
                }).after(function() {
                    var t, n = "";
                    for (t in e.params) n += '<input type="hidden" name="' + t + '" value="' + e.params[t] + '" />';
                    return n;
                });
            };
        }
    });
}, $.fn.setCenter = function(t) {
    var e = {
        topBottom: !0,
        leftRight: !0
    }, n = t = $.extend(e, t);
    return this.each(function() {
        var t = $(this);
        n.leftRight && t.css("left", ($(window).width() - $(this).outerWidth()) / 2), n.topBottom && t.css("top", ($(window).height() - $(this).outerHeight()) / 2);
    });
}, IT.BaseClass = class {
    get isClass() {
        return !0;
    }
}, IT.Component = class extends IT.BaseClass {
    constructor(t) {
        super(t);
        let e = this;
        e._id = "", e.settings = t || {}, e.content = null;
    }
    renderTo(t) {
        this.content.appendTo && this.content.appendTo(t);
    }
    get id() {
        return this._id;
    }
    set id(t) {
        this._id = t;
    }
    getId() {
        return this.id;
    }
    getContent() {
        return this.content;
    }
    getSetting() {
        return this.settings;
    }
}, IT.DataTable = class extends IT.Component {
    constructor(t) {
        super(t);
        let e = this;
        e.settings = $.extend({
            id: "",
            cls: "it-grid",
            width: "100%",
            height: "auto",
            top: 0,
            bottom: 0,
            cellEditing: !0,
            sort: "local",
            wrap: !1,
            store: {
                type: "json",
                params: {
                    start: 0,
                    limit: 20,
                    orderBy: "",
                    sortBy: ""
                }
            },
            columns: [ {} ]
        }, t), e.id = e.settings.id || IT.Utils.id();
    }
}, IT.Dialog = class extends IT.Component {
    constructor(t) {
        super();
        let e = this;
        e.elExist = !1, e.settings = $.extend(!0, {
            id: "",
            title: "",
            iconCls: "",
            items: [],
            overlay: !0,
            autoShow: !0,
            width: 300,
            height: 100,
            autoHeight: !0,
            css: {}
        }, t), e.id = e.settings.id || IT.Utils.id(), e.listener = new Listener(e, e.settings, [ "onShow", "onHide", "onClose" ]), 
        e.createElement(), e.settings.autoShow && e.show();
    }
    createElement() {
        let t = this;
        if (t.content = $(`\n\t\t\t<div class="it-dialog">\n\t\t\t\t<div class="it-dialog-container">\n\t\t\t\t\t<div class="it-dialog-content"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`), 
        t.settings.title) {
            let e = $("<div/>", {
                class: "it-title",
                html: t.settings.title
            });
            if (t.settings.iconCls) {
                let n = $("<span/>", {
                    class: "fa fa-" + t.settings.iconCls
                });
                n.prependTo(e);
            }
            t.content.find(".it-dialog-container").prepend(e);
        }
        t.settings.overlay || t.content.addClass("no-overlay"), $.each(t.settings.items, function(e, n) {
            n && (n.isClass || (n = IT.Utils.createObject(n)), n ? n.renderTo(t.content.find(".it-dialog-content")) : console.warn("Xtype: undefined", obj));
        }), t.content.find(".it-dialog-container").css({
            "max-width": t.settings.width
        }), t.content.find(".it-dialog-content").css($.extend(!0, t.settings.css, t.settings.autoHeight ? {
            "min-height": t.settings.height
        } : {
            height: t.settings.height
        })), t.content.appendTo("body").hide(), t.elExist = !0, t.settings.autoShow && t.show();
    }
    show() {
        let t = this;
        t.elExist || t.createElement(), t.content.show(0, function() {
            $(this).addClass("dialog-show"), $(this).find(".it-dialog-container").addClass("dialog-show");
        }), t.listener.fire("onShow", [ t, t.id ]), $(window).resize(function() {
            t._autoScrollContainer();
        }), t._autoScrollContainer();
    }
    hide() {
        let t = this;
        t.content.find(".it-dialog-container").removeClass("dialog-show").one(transitionEnd, function() {
            t.content.removeClass("dialog-show"), t.listener.fire("onHide", [ t, t.id ]);
        });
    }
    close() {
        let t = this;
        t.content.find(".it-dialog-container").removeClass("dialog-show").one(transitionEnd, function() {
            t.content.removeClass("dialog-show").one(transitionEnd, function() {
                setTimeout(() => {
                    t.elExist = !1, t.content.remove(), t.listener.fire("onClose", [ t, t.id ]);
                }, 300);
            });
        });
    }
    _autoScrollContainer() {
        let t = this.content.find(".it-dialog-container"), e = $(window).height();
        e - (t.offset().top + t.outerHeight()) <= 20 ? t.css({
            "overflow-y": "scroll",
            height: e - 30
        }) : t.css({
            "overflow-y": "initial",
            height: "auto"
        });
    }
}, IT.Form = class extends IT.Component {
    constructor(t) {
        super(t);
        let e = this;
        e.settings = $.extend(!0, {
            id: "",
            items: []
        }, t), e.id = e.settings.id || IT.Utils.id();
        let n, i = $("<div />", {
            id: e.id,
            class: "container-fluid"
        }), s = 0;
        $.each(e.settings.items, function(t, e) {
            e && (n = $("<div>", {
                class: "row"
            }), e.isClass || (e = IT.Utils.createObject(e)), e.renderTo(n), i.append(n), s++);
        }), e.content = $("<form />", {
            name: IT.Utils.id(),
            class: "it-form"
        }), e.content.append(i);
    }
}, IT.FormItem = class extends IT.Component {
    constructor(t) {
        super(t);
    }
    val(t) {
        return void 0 === t ? this.input.val() : this.input.val(t);
    }
    setInvalid(t = !0) {
        this.input[t ? "addClass" : "removeClass"]("invalid");
    }
    validate() {
        return !(!this.settings.allowBlank && "" == this.val());
    }
    setReadonly(t = !1) {
        this.input.attr("readonly", t)[t ? "addClass" : "removeClass"]("input-readonly");
    }
    setEnabled(t = !1) {
        this.input.attr("disabled", !t)[t ? "removeClass" : "addClass"]("input-disabled");
    }
}, IT.Grid = class extends IT.Component {
    constructor(t) {
        super(t);
        let e = this;
        if (e.settings = $.extend(!0, {
            id: "",
            type: "row",
            columnRule: "",
            rowContainer: "",
            css: {},
            items: []
        }, t), e.id = e.settings.id || IT.Utils.id(), "row" == e.settings.type) e.content = $("<div/>", {
            id: e.id,
            class: "row"
        }); else {
            if ("column" != e.settings.type) return console.info("Grid hanya mempunyai 2 type : row atau column"), 
            void (e.content = "");
            e.content = $("<div />", {
                id: e.id,
                class: e.settings.columnRule
            });
        }
        e.content.css(e.settings.css), $.each(e.settings.items, function(t, n) {
            n && ("function" != typeof n.renderTo && (n = IT.Utils.createObject(n)), n.renderTo(e.content));
        }), "row" == e.settings.type && "fluid" == e.settings.rowContainer ? e.content = $("<div/>", {
            class: "container-fluid"
        }).append(e.content) : "row" == e.settings.type && "standar" == e.settings.rowContainer && (e.content = $("<div/>", {
            class: "container"
        }).append(e.content));
    }
}, IT.HTML = class extends IT.Component {
    constructor(t) {
        super(t);
        let e = this;
        e.settings = $.extend(!0, {
            id: "",
            url: "",
            content: "",
            css: {},
            class: ""
        }, t), e.id = e.settings.id || IT.Utils.id(), e.content = $("<div/>", {
            id: e.id
        }), e.settings.class && e.content.addClass(e.settings.class), e.content.css(e.settings.css), 
        e.settings.url ? e.content.load(e.settings.url) : e.content.html(e.settings.content);
    }
    setContent(t, e = !1) {
        e && this.content.empty(), "string" == typeof t ? this.content.append(t) : t.appendTo(this.content);
    }
};

class Listener {
    constructor(t, e, n = []) {
        let i = this;
        i.events = {}, i.scope = t, n.forEach(t => i.events[t] = e[t]);
    }
    fire(t, e) {
        var n = this;
        "function" == typeof n.events[t] && n.events[t].apply(n.scope, e);
    }
    set(t) {}
}

IT.TextBox = class extends IT.FormItem {
    constructor(t) {
        super(t);
        let e, n = this;
        switch (n.settings = $.extend(!0, {
            x: "textbox",
            type: "text",
            cols: 19,
            rows: 5,
            maskSettings: {},
            id: "",
            label: "",
            name: "",
            allowBlank: !0,
            value: "",
            placeholder: "",
            readonly: !1,
            enabled: !0,
            length: {
                min: 0,
                max: -1
            },
            size: {
                field: "col-sm-8",
                label: "col-sm-4"
            },
            info: {
                prepend: "",
                append: ""
            }
        }, t), e = n.settings, n.id = e.id || IT.Utils.id(), "" == e.label && (e.size.field = "col-sm-12"), 
        e.type) {
          case "textarea":
            n.input = $(`<textarea style='resize: none;' id="${n.id}-item" ` + `class='it-edit-input' ` + `${0 == e.allowBlank ? `required` : ""} ` + `cols='${e.cols}' ` + `rows='${e.rows}' ` + `${e.readonly ? ` readonly ` : ""} ` + `${0 == e.enabled ? ` disabled ` : ""} ` + `name='${n.settings.name || IT.Utils.id()}' ` + `${e.length.min > 0 ? `minlength='${e.length.min}'` : ""} ` + `${e.length.max > 0 ? `maxlength='${e.length.max}'` : ""} ` + `>${e.value ? `${e.value}` : ""}</textarea>`);
            break;

          case "text":
          case "mask":
            n.input = $(`<input id="${n.id}-item" ` + `type='text' ` + `class='it-edit-input' ` + `name='${n.settings.name || IT.Utils.id()}' ` + `${e.length.min > 0 ? `minlength='${e.length.min}'` : ""} ` + `${e.length.max > 0 ? `maxlength='${e.length.max}'` : ""} ` + `${0 == e.allowBlank ? `required` : ""} ` + `${e.readonly ? ` readonly ` : ""} ` + `${0 == e.enabled ? ` disabled ` : ""} ` + `${e.placeholder ? `placeholder='${e.placeholder}'` : ""} ` + `${e.value ? `value='${e.value}'` : ""} ` + `>`), 
            "mask" == e.type && n.input.inputmask(e.maskSettings || {});
            break;

          default:
            console.error("input type unknown : " + e.type);
        }
        n.input.on("focus change blur", function(t) {
            n.setInvalid(!n.validate());
        });
        let i = $("<div class='it-edit' />").append(n.input);
        e.info.prepend && i.prepend($("<div />", {
            class: "it-edit-item",
            html: e.info.prepend
        })), e.info.append && i.append($("<div />", {
            class: "it-edit-item",
            html: e.info.append
        })), n.content = $((e.label ? `<div class="${e.size.label}">` + `<label for="${n.id}-item" class='it-input-label it-input-label-${e.labelAlign || "left"}'>${e.label}</label>` + `</div>` : "") + `<div class="${e.size.field}"></div>`), 
        n.content.last().append(i);
    }
}, IT.Utils = class extends IT.BaseClass {
    constructor(t) {
        super(t);
    }
    static createObject(t) {
        let e = t.xtype || t.x, n = {
            button: "Button",
            toolbar: "Toolbar",
            html: "HTML",
            flex: "Flex",
            panel: "Panel",
            form: "Form",
            textbox: "TextBox",
            checkbox: "CheckBox",
            select: "Select",
            grid: "Grid",
            datatable: "DataTable",
            tabs: "Tabs"
        };
        if (!IT[n[e]]) throw "Class IT." + n[e] + " not found";
        return n[e] && IT[n[e]] ? new IT[n[e]](t) : null;
    }
    static template(t, ...e) {
        return function(...n) {
            var i = n[n.length - 1] || {}, s = [ t[0] ];
            return e.forEach(function(e, o) {
                var a = Number.isInteger(e) ? n[e] : i[e];
                s.push(a, t[o + 1]);
            }), s.join("");
        };
    }
    static id() {
        for (var t = "IT-", e = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", n = 0; n < 5; n++) t += e.charAt(Math.floor(Math.random() * e.length));
        return t;
    }
};